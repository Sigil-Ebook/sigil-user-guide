<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="en" xml:lang="en">
<head>
  <title>Tutorials</title>
  <link href="../Styles/styles.css" type="text/css" rel="stylesheet"/>
</head>

<body>
  <h2 id="tutorial_checkpoints">Using Checkpoints to Quickly Save/Restore Epub State</h2>

  <p>Sigil has many powerful tools to automate repairing, splitting, merging, renaming, and moving xhtml, images, stylesheets, and other resources. These tools can make numerous changes that a simple Undo/Redo can not handle. To help prevent inadvertent data loss and to provide a way to “undo” even larger scale changes, we have added a Checkpoint capability to Sigil.</p>

  <div class="image"><img alt="Image of the Checkpoints menu." style="width:45%" src="../Images/cp-menu.png"/></div>

  <p>A checkpoint is a quick snapshot of the entire state of the EPUB that is stored in its own git repository that is kept inside your Sigil Preferences folder inside the "repo" folder. Creating a checkpoint can be as simple as one click on the Checkpoint icon or by using the Checkpoint Menus. Each Checkpoint made of an EPUB is named/numbered sequentially.</p>

  <div class="image"><img alt="Checkpoint dialog to select a previous checkpoint." style="width:30%" src="../Images/cp-select.png"/></div>

 <p>Once a Checkpoint is made, users can feel safe to make larger changes to their copy knowing that they can easily restore to their last checkpoint.</p>

<p>Users can also edit and attach their own short description of each Checkpoint: <span class="menuitem">Checkpoints=&gt;Edit Checkpoint Descriptions</span> to help keep track of at what point in the editing process this checkpoint was made.</p>

  <p>An added advantage of using checkpoints is that a user can always compare the current state of their EPUB against any of their earlier checkpoints to see exactly what was changed and how. Here is image showing the output of a comparison done against an earlier checkpoint during an editing session. After selecting the checkpoint to compare against the following dialog is shown showing which files have changed:</p>

  <div class="image"><img alt="Dialog showing differences between current epub and an earlier checkpoint." src="../Images/cp-differences.png"/></div>

  <p>Users can select and view any of the files that only exist in the current EPUB or only exist in the checkpoint.</p>

  <div class="image"><img alt="Text file Viewer window." src="../Images/cp-viewer.png"/></div>

  <p>For text files that have been modified, the user is provided with a side by side highlighted view of both the lines changes and the areas within the lines that have been changed.</p>

  <div class="image"><img alt="A 'Diff' Window showing side by side changes in an xhtml file." src="../Images/cp-compare2.png"/></div>

  <p>When the final version of the EPUB has been produced and saved, the user can manage their checkpoint repositories to remove them and free up disk space.</p>

  <div class="image"><img alt="Checkpoint Manage Repos dialog." src="../Images/cp-manage.png"/></div>

  <p>Or they can generate a summary of the changes made in each checkpoint:  <span class="menuitem">Checkpoints=&gt;Show Log of Checkpoints</span> to help them select earlier versions to restore from if needed.</p>

  <div class="image"><img alt="CheckPoint Repo Log viewer." src="../Images/cp-log.png"/></div>

 <div class="tip">
    <p class="tiptext">Some Sigil tools like “Mend” or “Mend and Prettify” can make a large number of changes to white space which can help hide more significant changes later. Therefore it is a good idea that after using a tool that makes large white space changes, you checkpoint both right before and immediately after using the tool so you can make finding later changes much easier.</p>
</div>
<div class="tip">
    <p class="tiptext">Since the both the EPUB file name and title can be easily changed, especially during editing, relying on the file name or title to uniquely identify an EPUB across changes not a good idea. To uniquely identify your EPUB, the Checkpoint tool will add a dc:identifier using the UUID scheme to your EPUB <b>if one does not already exist</b>. This identifier will form the basis of the repository name. It should remain unchanged during editing. This UUID identifier need not be your book’s unique-identifier, it just has to exist unchanged until you are finished using the Checkpoint tool.</p>
  </div>
</body>
</html>